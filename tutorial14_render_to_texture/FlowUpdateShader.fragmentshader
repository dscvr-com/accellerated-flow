#version 330 core

in vec2 UV;

uniform sampler2D srcA;
uniform sampler2D srcB;

out vec2 color;

void main() {
    vec4 pointA = texture(srcA, UV);
    vec4 pointB = texture(srcB, UV);

    float g11 = pointA.x * 1000;
    float g12 = pointA.y * 1000;
    float g22 = pointA.z * 1000;
    float h1 = pointB.x * 1000;
    float h2 = pointB.y * 1000;

    float idet = 1./(g11*g22 - g12*g12 + 1e-3);

    float x = (g11*h2-g12*h1) * idet;
    float y = (g22*h1 - g12*h2) * idet;

    color = vec2(x, y);
}